<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index mastermind</title>
</head>

<body onload="init()">
    <script>

        const colorsArray = ['white', 'green', 'red', 'blue', 'pink', 'yellow', 'orange', 'cyan']
        const masterArray = [];
        const userArray = [];
        const matchArray = []
        const resultArray = ['white', 'grey', 'black'];
        const MAX_ATTEMPS = 10;
        const MAX_COMBINATION_COLORS = 4;
        var coincide = Boolean;
        var colorsResultArray = [];


        //function that make a random Array whit random colours
        function getRandomMaster() {
            for (let i = 1; i <= MAX_COMBINATION_COLORS; i++) {
                masterArray.push(colorsArray[Math.floor(Math.random() * colorsArray.length)]);
            }
            console.log("ARRAY DE LA MASTER: " + masterArray)
        }

        //function that simulate the user combination
        function getRandomUser() {
            for (let i = 1; i <= MAX_COMBINATION_COLORS; i++) {
                userArray.push(colorsArray[Math.floor(Math.random() * colorsArray.length)]);
            }
            console.log("ARRAY DEL USUARIO: " + userArray)
        }

        //function that displays the master array on the navegator screen
        function makeMasterArray(masterArray) {
            let containerDiv = document.createElement("div")
            containerDiv.className = "containsMasterArray"
            for (let i = 0; i < masterArray.length; i++) {
                let div = document.createElement("div");
                div.className = "masterBoxes";
                div.innerHTML = masterArray[i];
                containerDiv.appendChild(div);
                containerDiv.style.display = "flex"
                div.style.backgroundColor = masterArray[i]
                div.style.width = "70px"
                div.style.height = "70px"
                div.style.margin = "10px";
            }
            document.body.appendChild(containerDiv)
        }

        //function that displays the user array on the navegator screen
        function makeUserArray(userArray) {
            let contaninerUser = document.createElement("div")
            contaninerUser.className = "containsUserArray"
            for (let i = 0; i < userArray.length; i++) {
                let div = document.createElement("div");
                div.className = "userBoxes";
                div.innerHTML = userArray[i];
                contaninerUser.appendChild(div);
                contaninerUser.style.display = "flex"
                div.style.backgroundColor = userArray[i];
                div.style.width = "70px";
                div.style.height = "70px";
                div.style.margin = "10px";
                //printDifferentColours(userArray)
            }
            document.body.appendChild(contaninerUser)
        }

        //function that displays the colours array on the navegator screen
        function makeColoursArray(colorsArray) {
            let containerDiv = document.createElement("div");
            containerDiv.className = "containsColoursArray";
            containerDiv.style.display = "flex";

            for (let i = 0; i < colorsArray.length; i++) {
                let div = document.createElement("div");
                div.className = "colorBottoms";
                div.innerHTML = colorsArray[i];
                div.style.width = "70px";
                div.style.height = "70px";
                div.style.backgroundColor = colorsArray[i];
                div.style.margin = "10px";

                containerDiv.appendChild(div);
            }
            document.body.appendChild(containerDiv);
        }

        //funcion que compara user array y master array
        function compareTwoArrays(userArray, masterArray) {
            console.log("entra en compare")
            for (let i = 0; i < masterArray.length; i++) {
                for (let j = 0; i < userArray.length; i++) {
                    //hay coincidencia
                    if (masterArray[i].includes(userArray[j])) {
                        coincide = true;
                        colorsResultArray = "white";
                        matchArray.push(colorsResultArray);
                        console.log(colorsResultArray);
                        if (masterArray[i] == userArray[j]) {
                            colorsResultArray = "black"
                            console.log(colorsResultArray);
                            matchArray.push(colorsResultArray);
                        }
                    } else { //no hay coincidencia
                        coincide = false;
                        colorsResultArray = "grey";
                        console.log(colorsResultArray);
                        matchArray.push(colorsResultArray);
                    }
                }
            }
            makeResultArray(matchArray, coincide);
        }

        function makeResultArray(matchArray, coincide) {
            let contaninerResult = document.createElement("div");
            contaninerResult.className = "containResultArray";
            contaninerResult.style.backgroundColor = "Violet"
            for (let i = 0; i < MAX_COMBINATION_COLORS; i++) {
                let div = document.createElement("div");
                div.className = "resultBoxes";
                div.innerHTML = matchArray[i];
                contaninerResult.appendChild(div);
                contaninerResult.style.display = "flex"
                div.style.backgroundColor = matchArray[i];
                div.style.width = "70px";
                div.style.height = "70px";
                div.style.margin = "10px";
                //printDifferentColours(userArray)
            }
            document.body.appendChild(contaninerResult)
        }


        function init() {
            getRandomMaster()
            getRandomUser()
            makeColoursArray(colorsArray)
            makeMasterArray(masterArray)
            makeUserArray(userArray)
            compareTwoArrays(userArray, masterArray)
        }

    </script>
    <h1>Mastermind</h1>
    <article class="containsFirstPartOfGame">
        <div class="containsMasterArray">MASTER ARRAY</div>
        <div class="containsColoursArray">
            <h2>Pulsa la combinaci√≥n de 4 colores</h2>
            ARRAY DE COLORES
            <input disabled class="userSelection" type="text">
            <button class="checkButtom" onclick="compareTwoArrays()">Comprobar</button>
        </div>
    </article>
    <article class="checkGame">
        <div>
            <p class="mensajeIntentos">Primer Intento Suerte!</p>
            <div class="containsResults">
                <div class="options"></div>
                Contiene array de colores del usuario
                <div class="resuts"></div>
                Contiene array con colores black white y grey
            </div>
        </div>
    </article>
    <div class="containsUserTryes"></div>
</body>

</html>